# Copy this file to .env for local development. Do not commit your .env file to git.
# Defaults favor local development (SQLite, DEBUG=True, local Redis, Gmail SMTP test values).

# Core Django settings
DEBUG=True                     # Enable debug mode for local development
SECRET_KEY=changeme-with-create_env-script  # Replaced by scripts/create_env.py; keep secret
ALLOWED_HOSTS=localhost,127.0.0.1           # Comma-separated hosts allowed to serve the app
CSRF_TRUSTED_ORIGINS=                     # Optional: trusted origins for CSRF protection (comma-separated URLs)
TIME_ZONE=UTC                             # Django time zone
DJANGO_SETTINGS_MODULE=FDQ.settings       # Settings module (override if needed)
TURNSTILE_SITE_KEY=                       # Cloudflare Turnstile site key (leave blank locally)
TURNSTILE_SECRET_KEY=                     # Cloudflare Turnstile secret key (leave blank locally)

# Database
DATABASE_URL=sqlite:///db.sqlite3         # dj-database-url compatible database URL

# Redis / Channels / Celery
REDIS_URL=redis://127.0.0.1:6379/0        # Default Redis instance for caching/general use
CHANNEL_LAYERS_REDIS_URL=${REDIS_URL}     # Channels backend Redis URL
CELERY_BROKER_URL=redis://127.0.0.1:6379/1 # Celery broker (Redis DB 1 by default)
CELERY_RESULT_BACKEND=${CELERY_BROKER_URL} # Where Celery stores task results

# Static & media
STATIC_URL=/static/                       # Base URL for static files (Whitenoise for local)
MEDIA_URL=/media/                         # Base URL for media files
STATIC_ROOT=staticfiles                   # Collection directory for static files
MEDIA_ROOT=media                          # Local media storage path
USE_AWS=False                             # Enable S3/Cloud storage (set to True in production when using AWS)

# Email (Gmail SMTP defaults for testing)
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_HOST_USER=your-gmail@example.com    # Replace with your Gmail address
EMAIL_HOST_PASSWORD=                      # App password/SMTP password (leave blank locally)
EMAIL_USE_TLS=True
DEFAULT_FROM_EMAIL=FDQ <no-reply@example.com>
SERVER_EMAIL=${DEFAULT_FROM_EMAIL}

# Security & auth
AXES_ENABLED=True                         # Enable django-axes for login protection
AXES_FAILURE_LIMIT=5                      # Number of failed attempts allowed
AXES_COOLOFF_TIME=1                       # Hours before failed attempts reset
AXES_LOCK_OUT_AT_FAILURE=True             # Lock user out after exceeding limit
SECURE_SSL_REDIRECT=False                 # Set True in production behind HTTPS
SESSION_COOKIE_SECURE=False               # Set True in production
CSRF_COOKIE_SECURE=False                  # Set True in production

# Third-party integrations (optional; leave empty if unused)
SENTRY_DSN=                               # Sentry project DSN
STRIPE_PUBLIC_KEY=                        # Stripe publishable key
STRIPE_SECRET_KEY=                        # Stripe secret key
GOOGLE_OAUTH_CLIENT_ID=                   # Google OAuth client ID
GOOGLE_OAUTH_CLIENT_SECRET=               # Google OAuth client secret

# Channels / WebSockets
DJANGO_ALLOW_ASYNC_UNSAFE=False           # Keep False; set True only if you know what you're doing

# Celery worker tuning
CELERY_TASK_ALWAYS_EAGER=False            # Set True to execute tasks locally (useful for tests)
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json

# Logging
LOG_LEVEL=INFO                            # Logging level (DEBUG, INFO, WARNING, ERROR)

############################
# PRODUCTION ONLY SETTINGS #
############################
# The following variables are for deployments (e.g., AWS/S3). They are NOT needed locally.
# Prefer a secrets manager (AWS Secrets Manager, Vault, etc.) instead of committing secrets.
AWS_ACCESS_KEY_ID=                        # AWS access key (production only)
AWS_SECRET_ACCESS_KEY=                    # AWS secret key (production only)
AWS_STORAGE_BUCKET_NAME=                  # S3 bucket for static/media (production only)
AWS_S3_REGION_NAME=                       # AWS region (e.g., us-east-1)
AWS_S3_CUSTOM_DOMAIN=                     # Optional custom domain for S3 assets
AWS_S3_OBJECT_PARAMETERS=                 # Extra S3 params (JSON string if needed)
AWS_DEFAULT_ACL=public-read
AWS_QUERYSTRING_AUTH=False
STATICFILES_STORAGE=storages.backends.s3boto3.S3Boto3Storage
DEFAULT_FILE_STORAGE=storages.backends.s3boto3.S3Boto3Storage

EMAIL_HOST_PASSWORD_PROD=                 # Production SMTP password or app password
ADMINS=                                   # Comma-separated admin emails for error reporting

# Example: enable AWS in production
# USE_AWS=True
# AWS_ACCESS_KEY_ID=your-key
# AWS_SECRET_ACCESS_KEY=your-secret
# AWS_STORAGE_BUCKET_NAME=fdq-static-media

# Optional: Sentry/Stripe/Google OAuth secrets for production
# SENTRY_DSN=your-sentry-dsn
# STRIPE_PUBLIC_KEY=pk_live_example
# STRIPE_SECRET_KEY=sk_live_example
# GOOGLE_OAUTH_CLIENT_ID=prod-client-id
# GOOGLE_OAUTH_CLIENT_SECRET=prod-client-secret

################
# How to use: #
################
# 1. cp .env.example .env
# 2. python3 -m venv .venv && . .venv/bin/activate
# 3. pip install -r requirements.txt
# 4. python scripts/create_env.py   # generates SECRET_KEY and writes .env
# 5. Set production-only AWS vars if deploying (e.g., USE_AWS=True, export USE_AWS=True)
#
# Never commit your .env file. Use a secrets manager for production secrets.
